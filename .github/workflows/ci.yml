name: CI\n\non: [push, pull_request]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-python@v4\n        with:\n          python-version: '3.10'\n      - run: pip install -r requirements.txt\n      - run: pip install pytest jsonschema\n      - name: Run regression and schema tests\n        run: pytest -q\n      - name: Run pipeline smoke tests\n        run: |\n          python -m tools.rtsc_pipeline quick_check 150 3.0 --mu 0.12 --fomega 1.0\n          python -m tools.rtsc_pipeline demo --out out/demo\n          test -s out/demo/rtsc_results.json\n          test -s out/demo/rtsc_analysis_report.md\n          test -s out/demo/rtsc_analysis_dashboard.png\n          python - << 'PY'\nimport json\nwith open('out/demo/rtsc_results.json') as f:\n    d=json.load(f)\nassert 'timestamp' in d and 'tc_estimate_K' in d and 'success_probability' in d\nPY\n
